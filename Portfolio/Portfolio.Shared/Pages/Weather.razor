@page "/weather"
@using Portfolio.Shared.Services
@inject WeatherService WeatherService
<h3>Weather</h3>

@if (double.IsNaN(CurrentTempC))
{
    <p>Loading or failed to load temperature...</p>
}
else
{
    <p>Current Temp (°C): @CurrentTempC</p>
    <p>Current Temp (°F): @CurrentTempF</p>
}

@code {

    private double CurrentTempC;
    private double CurrentTempF;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            // Get the temperature in Celsius
            CurrentTempC = await WeatherService.GetCurrentTemperatureAsync();

            // Convert to Fahrenheit
            if (!double.IsNaN(CurrentTempC))
            {
                CurrentTempF = CurrentTempC * 1.8 + 32;
            }
        }
        catch (Exception ex)
        {
            // Handle the exception (e.g., log it, show a message to the user, etc.)
            Console.WriteLine($"An error occurred while getting the temperature: {ex.Message}");
            CurrentTempC = double.NaN; // Indicate that the temperature could not be loaded
        }
    }
}